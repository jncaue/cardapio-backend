#{extends 'main.html' /}
#{set title:'Cardapio' /}

#{if flash.error || flash.success}
	<div id="flash-message"
		class="flash-message
	           #{if flash.error} flash-error #{/if}
	           #{if flash.success} flash-success #{/if}">
		${flash.error ?: flash.success}
	</div>
#{/if}

<div class="center">

	<div class="banner fade-in">
		<img class="banner-img"
			src="../../../public/images/pizza-6478478_1280.jpg">
		<div class="banner-info">
			<img src="../../../public/images/icons/icons8-restaurante-48.png">
			<h1>MenuDev</h1>
			<button class="hour-btn">19h-23h30</button>
			
		</div>
	</div>

<h1 class="info-h1">Clique no item desejado para adicionar ao carrinho!</h1>
<h2 class="info-h2">Boas compras e bom apetite!</h2>

<div class="menu-container fade-in" >

	<div class="items-container fade-in">
		<div class="drink-container item-card fade-in">
			<h1>Hamburguers</h1>
			<ul class="list">
				#{list items: listaDeHamburguers, as:'produto'}
				<a class="add" data-id="${produto.id}" href="@{Produtos.adicionarItem(produto.id)}">
					<li class="card-li">${produto.nome}
						<ul class="sub-list">
							<li class="desc italic">${produto.descricao}</li>
							<li class="preco">R$${produto.preco},00</li>
						</ul>
					</li>
				</a>
				#{/list}
			</ul>
		</div>
		
		<div class="drink-container item-card">
			<h1>Calzones</h1>
			<ul class="list">
				#{list items: listaDeCalzones, as:'produto'}
				<a class="add" data-id="${produto.id}" href="@{Produtos.adicionarItem(produto.id)}">
					<li class="card-li">${produto.nome}
						<ul class="sub-list">
							<li class="desc italic">${produto.descricao}</li>
							<li class="preco">R$${produto.preco},00</li>
						</ul>
					</li>
				</a>
				#{/list}
			</ul>
		</div>

		<div class="drink-container item-card">
			<h1>Pizzas</h1>
			<ul class="list">
				#{list items: listaDePizzas, as:'produto'}
				<a class="add" data-id="${produto.id}" href="@{Produtos.adicionarItem(produto.id)}">
					<li class="card-li">Pizza ${produto.tamanho.nome}
						<ul class="sub-list">
							<li class="desc italic">${produto.descricao}</li>
							<li class="preco">R$${produto.preco},00</li>
						</ul>
					</li>
				</a>
				#{/list}
			</ul>
		</div>

		<div class="drink-container item-card">
			<h1>Bebidas</h1>
			<ul class="list">
				#{list items: listaDeBebidas, as:'produto'}
				<a class="add" data-id="${produto.id}" href="@{Produtos.adicionarItem(produto.id)}">
					<li class="card-li">${produto.nome}
						<ul class="sub-list">
							<li class="desc italic">${produto.descricao}</li>
							<li class="preco">R$${produto.preco},00</li>
						</ul>
					</li>
				</a>
				#{/list}
			</ul>
		</div>

		<div class="dessert-container item-card">
			<h1>Sobremesas</h1>
			<ul class="list">
				#{list items: listaDeSobremesas, as:'produto'}
				<a class="add" data-id="${produto.id}" href="@{Produtos.adicionarItem(produto.id)}">
					<li class="card-li">${produto.nome}
						<ul class="sub-list">
							<li class="desc italic">${produto.descricao}</li>
							<li class="preco">R$${produto.preco},00</li>
						</ul>
					</li>
				</a>
				#{/list}
			</ul>
		</div>
	</div>
</div>

<a href="@{Produtos.verCarrinho}" class="cart-float">
    <img src="/public/images/icons/icons8-carrinho.apng" class="fa fa-shopping-cart"></img>
</a>



</div>


<script>
document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".add").forEach(a => {
        a.addEventListener("click", function (e) {
            e.preventDefault();
            const id = this.dataset.id;

            fetch("@{Produtos.adicionarItemAjax()}" + "?id=" + id, {
                method: "GET",
                headers: {
                    "X-Requested-With": "XMLHttpRequest"
                }
            })
            .then(res => res.json())
            .then(data => {
                // Mostra a mensagem de sucesso
                const msg = document.createElement("div");
                msg.className = "flash-message flash-success";
                msg.innerText = data.msg;

                document.body.appendChild(msg);

                setTimeout(() => msg.remove(), 2000);
            });
        });
    });
});
</script>